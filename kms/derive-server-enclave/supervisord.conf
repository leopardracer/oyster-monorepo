[supervisord]
loglevel=debug
logfile=/dev/stdout
logfile_maxbytes=0

# attestation server
[program:attestation-server]
command=/app/attestation-server --ip-addr 0.0.0.0:1300 --pub-key /app/secp256k1.pub --init-params /app/init-params
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# attestation server x25519
[program:attestation-server-x25519]
command=/app/attestation-server --ip-addr 0.0.0.0:1301 --pub-key /app/x25519.pub --init-params /app/init-params
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# proxy components inside enclave
[program:ip-to-vsock-raw-outgoing]
command=/app/ip-to-vsock-raw-outgoing --vsock-addr 3:1200 --queue-num 0
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

[program:vsock-to-ip-raw-incoming]
command=/app/vsock-to-ip-raw-incoming --vsock-addr 88:1200 --device lo
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# DNS-over-HTTPS provider
[program:dnsproxy]
command=/app/dnsproxy -u https://1.1.1.1/dns-query
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# your custom programs go here

# kms derive server
# WARN: This is only a test server
# You would never want this to listen on 0.0.0.0 in prod
[program:kms-derive-server]
command=/app/kms-derive-server --kms-endpoint 13.234.247.203:1100 --listen-addr 0.0.0.0:1100 --pcr0 0967c050e4075d35d94dadd6840e81bf005ae9bc596019574b0269a3f9bd2258f17755d426e5be878b26fccb1d182320 --pcr1 8384311b93170c6ae8b29b927eb683022a118957d0ad26d2c866fdb87e96bc1fcad5583ead068a103189f0c1731afb84 --pcr2 955a19ed8887fd9a80d3a1be34ed2a3b20c21472b8cd2148968c7387dd77fe22eca30e2cda2b072fcc4eca861f03998f --user-data 544d4b69000100009293c43082fb8d3a59eea7c322fd847e8fc3bc046465e8ca7492e571f193370e63577057a623735facc16c8a985200c265423ac1c460a89a61dea7014cb985c0e24088ae93d6ebfdb9cf5e245a509e473438ea1cab33f596e6d437743c1941eb4d3ba33aca811792880eefeb3d9ef7c65efac81b63f82d77b2305c24a8888da672aface29e9ab746463bd4db709eb66b5c0385bce558c45010f441e5603502e3397c57a98c1cb7e38e14de72f03d1d7d4a79b04a39cf0783532452be0bb351a1b4256bc802c8f1617efc3347a720efdb669fe712ee6ee97260775371cbffafabbfe09fb000f529039292c430868c3d012a5d524f0939e4ee4d60b738b4c44448ec286a5361e15ffbf2641e2df25363a204a738231e5f1a9621999741da01ba7b22636f6e646974696f6e223a7b22636861696e223a3133372c22636f6e646974696f6e54797065223a22636f6e7472616374222c22636f6e747261637441646472657373223a22307864383839374634323232653663363432433832323535393739333835633239364244364442363142222c2266756e6374696f6e416269223a7b22696e70757473223a5b7b22696e7465726e616c54797065223a2261646472657373222c226e616d65223a22222c2274797065223a2261646472657373227d5d2c226e616d65223a2269735665726966696564222c226f757470757473223a5b7b22696e7465726e616c54797065223a22626f6f6c222c226e616d65223a22222c2274797065223a22626f6f6c227d5d2c2273746174654d75746162696c697479223a2276696577222c2274797065223a2266756e6374696f6e227d2c226d6574686f64223a2269735665726966696564222c22706172616d6574657273223a5b223a7573657241646472657373225d2c2272657475726e56616c756554657374223a7b22636f6d70617261746f72223a223d3d222c2276616c7565223a747275657d7d2c2276657273696f6e223a22312e302e30227dc441a0b511ddb39b4ac16336d437144c4eab4a575d61cc1144ee281d48d6b142da251b8af51b515851075bb4f6265ef0997e7521452c138c48d03c69a034afe3eadb1b
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0
