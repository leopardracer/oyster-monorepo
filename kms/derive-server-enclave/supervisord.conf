[supervisord]
loglevel=debug
logfile=/dev/stdout
logfile_maxbytes=0

# attestation server
[program:attestation-server]
command=/app/attestation-server --ip-addr 0.0.0.0:1300 --pub-key /app/secp256k1.pub --init-params /app/init-params
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# attestation server x25519
[program:attestation-server-x25519]
command=/app/attestation-server --ip-addr 0.0.0.0:1301 --pub-key /app/x25519.pub --init-params /app/init-params
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# proxy components inside enclave
[program:ip-to-vsock-raw-outgoing]
command=/app/ip-to-vsock-raw-outgoing --vsock-addr 3:1200 --queue-num 0
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

[program:vsock-to-ip-raw-incoming]
command=/app/vsock-to-ip-raw-incoming --vsock-addr 88:1200 --device lo
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# DNS-over-HTTPS provider
[program:dnsproxy]
command=/app/dnsproxy -u https://1.1.1.1/dns-query
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0

# your custom programs go here

# kms derive server
# WARN: This is only a test server
# You would never want this to listen on 0.0.0.0 in prod
[program:kms-derive-server]
command=/app/kms-derive-server --kms-endpoint v1.kms.box:1100 --listen-addr 0.0.0.0:1100 --pcr0 cb7ebc13d527e9cf9cc271b0d816c72a5bfa685ae56118ce4986fa82b8b9aac8b851206539a6c4600ad77566aa15bd0e --pcr1 3b26340a10ac3a5494139fed12bc30028017b72dabfb78a38763bd21ea67bbfe03214e7ce628c2952cfa2ff478f370ba --pcr2 0d128997bfc8ef24a2aa1ecec60c61e48eda9b439f8662d41eb38d8f0ba0401367778a5f8804127c591d824d5c3ed617 --user-data 544d4b69000100009293c430ab7cb2a15b65afdead61147e1b6b9a651a60f940f2cdbce34975b62e758be58d12b685b72f2025da9252b70d84614e00c460b344b0eeaff67ede6a1c58dc3e4581bf30554fb74f26be56b8c0244725cfda29a301b8be57bed64f96034e85f4b825e30fa4cced04d48176634d4c1f8a43ddd71d81a2038f0883329037dddaf9220d1eed65b32fa2d9e700191724b181fbd3e4c450fc7262ebdd4b5dd48719f6f4413067f0eaca831aa1e8aa43ed4d1040a3912b628e579e9aebe956988eb1d50fe500187bb6b1321c31c417168dc41e429fbff477a7870779fc50a05ddb4fb392ace916e89292c430868c3d012a5d524f0939e4ee4d60b738b4c44448ec286a5361e15ffbf2641e2df25363a204a738231e5f1a9621999741da01ba7b22636f6e646974696f6e223a7b22636861696e223a3133372c22636f6e646974696f6e54797065223a22636f6e7472616374222c22636f6e747261637441646472657373223a22307842376336623361436336303935654232613865666638663136423235304434343237313246303933222c2266756e6374696f6e416269223a7b22696e70757473223a5b7b22696e7465726e616c54797065223a2261646472657373222c226e616d65223a22222c2274797065223a2261646472657373227d5d2c226e616d65223a2269735665726966696564222c226f757470757473223a5b7b22696e7465726e616c54797065223a22626f6f6c222c226e616d65223a22222c2274797065223a22626f6f6c227d5d2c2273746174654d75746162696c697479223a2276696577222c2274797065223a2266756e6374696f6e227d2c226d6574686f64223a2269735665726966696564222c22706172616d6574657273223a5b223a7573657241646472657373225d2c2272657475726e56616c756554657374223a7b22636f6d70617261746f72223a223d3d222c2276616c7565223a747275657d7d2c2276657273696f6e223a22312e302e30227dc4414a4370439585dc46b0db4420f0f6262e41b5d0d1f8cba167321062ab449152a30ea43e87b7e68a4958c77d26204cf2d6aa292f533d1d08fe6b261c338f0be2dc1b
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stdout
stderr_logfile_maxbytes=0
